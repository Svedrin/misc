{% extends "base.html" %}
{% load display_extras %}
{# kate: space-indent on; indent-width 2; replace-tabs on; hl Django HTML Template; #}
{% block content %}
<ol class="breadcrumb">
  <li><a href="/">Home</a></li>
  <li>
    <a href="{% url hosts.views.host check.target_host.fqdn %}">{{ check.target_host|display:"fqdn" }}</a>
    {% if check.target_host != check.exec_host %}(as seen by <a href="{% url hosts.views.host check.exec_host.fqdn %}">{{ check.exec_host|display:"fqdn" }}</a>){% endif %}
  </li>
  <li><a href="{% url monitoring.views.check_details check.uuid %}">{{ check|display:"uuid" }}</a></li>
  <li class="active">{{ variable|display }}</li>
</ol>
{% include "monitoring/checkinfo.inc.html" %}
<h3>{{ variable|display }}</h3>
<div>
  <button class="btn btn-default" onclick="loadimg(parseInt(new Date().getTime() / 1000) -      4*60*60);">4h</button>
  <button class="btn btn-default" onclick="loadimg(parseInt(new Date().getTime() / 1000) -     24*60*60);">24h</button>
  <button class="btn btn-default" onclick="loadimg(parseInt(new Date().getTime() / 1000) -     48*60*60);">48h</button>
  <button class="btn btn-default" onclick="loadimg(parseInt(new Date().getTime() / 1000) -   7*24*60*60);">1w</button>
  <button class="btn btn-default" onclick="loadimg(parseInt(new Date().getTime() / 1000) -  30*24*60*60);">1m</button>
  <button class="btn btn-default" onclick="loadimg(parseInt(new Date().getTime() / 1000) - 365*24*60*60);">1y</button>
</div>
<div style="width: 100%">
  <img class="widescreenonly"   src="{% url monitoring.views.render_check check.uuid variable.name %}?{{ request.META.QUERY_STRING }}" alt="graph" style="margin: 0 auto" />
  <img class="narrowscreenonly" src="{% url monitoring.views.render_check check.uuid variable.name %}?width=410&amp;{{ request.META.QUERY_STRING }}" alt="graph" style="margin: 0 auto" />
  <img class="tinyscreenonly"   src="{% url monitoring.views.render_check check.uuid variable.name %}?width=220&amp;{{ request.META.QUERY_STRING }}" alt="graph" style="margin: 0 auto" />
</div>
<script type="text/javascript">
function loadimg(start, end){
  start = start || (parseInt(new Date().getTime() / 1000) - 24*60*60);
  end   = end   || null;
  var baseurl = "{% url monitoring.views.render_check_page check.uuid variable.name %}";
  location.href = baseurl + "?start=" + start + (end !== null ? "&end=" + end : "");
}
</script>
{% endblock %}
