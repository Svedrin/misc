l# kate: space-indent on; indent-width 2; replace-tabs on; hl Django HTML Template; #}
{% load display_extras %}
{% load monitoring_extras %}
{% if list_checks %}
<table class="table table-hover">
  <thead>
    <tr>
      <th>Host</th>
      <th>Check Label</th>
      <th>Sensor</th>
      <th>Parameters</th>
      <th> </th>
    </tr>
  </thead>
  <tbody>
  {% for check in list_checks %}
    {% ifperm "r" on check %}
      <tr targetlink="{% url 'monitoring.views.check_details' check.uuid %}" class="checktr {% if check.current_alert %}warning{% else %}success{% endif %}">
        <td>
          {{ check.target_host }}
          {% if check.target_host != check.exec_host %}(as seen by {{ check.exec_host }}){% endif %}
        </td>
        <td>{{ check|displayonly }}</td>
        <td>{{ check.sensor }}</td>
        <td>{{ check.paramstring }}</td>
        <td><a href="{% url 'monitoring.views.check_details' check.uuid %}" title="View details" style="text-decoration: none">â†’</a></td>
      </tr>
    {% endifperm %}
  {% endfor %}
  </tbody>
</table>
<script type="text/javascript">
$(".checktr").click(function(ev){
  ev.preventDefault();
  ev.stopPropagation();
  if(ev.ctrlKey){
    window.open(this.attributes.targetlink.value);
  }
  else{
    window.location = this.attributes.targetlink.value;
  }
});
</script>
{% else %}
<p>No checks found.</p>
{% endif %}
