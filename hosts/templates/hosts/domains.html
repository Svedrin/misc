{% extends "base.html" %}
{# kate: space-indent on; indent-width 2; replace-tabs on; hl Django HTML Template; #}
{% load mptt_tags %}
{% load display_extras %}
{% load monitoring_extras %}
{% block title %}Fluxmon &mdash; Domains{% endblock %}
{% block content %}
<ul class="children">
  {% recursetree nodes %}
    {% if not node.is_root_node %}
      <li>
        {{ node }} {% if node.host_set.count %} ({{ node.host_set.count }} Host{{ node.host_set.count|pluralize }})
          <ul>
            {% for host in node.get_hosts %}
              {% ifperm "r" on host %}
                <li><a href="{% url hosts.views.host host.fqdn %}">{{ host }}</a></li>
              {% endifperm %}
            {% endfor %}
          </ul>
        {% endif %}
      {% endif %}
      {% if not node.is_leaf_node %}
        <ul class="children">
          {{ children }}
        </ul>
      </li>
    {% endif %}
  {% endrecursetree %}
</ul>
{% endblock %}
